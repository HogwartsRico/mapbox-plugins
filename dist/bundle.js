!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Mapbox=e():t.Mapbox=e()}(this,function(){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(14)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,i){var r=i[e];if(r){var n={};for(var o in r)n[o]=r[o];n.value=n.initializer?n.initializer.call(t):void 0,Object.defineProperty(t,e,n)}}function l(t){if(!t||!t.hasOwnProperty)return!1;for(var e=["value","initializer","get","set"],i=0,r=e.length;i<r;i++)if(t.hasOwnProperty(e[i]))return!0;return!1}function s(t,e){return l(e[e.length-1])?t.apply(void 0,n(e).concat([[]])):function(){return t.apply(void 0,f.call(arguments).concat([e]))}}function u(t){return t.hasOwnProperty(w)===!1&&g(t,w,{value:new b}),t[w]}function c(t){var e={};return k(t).forEach(function(i){return e[i]=v(t,i)}),e}function h(t){return function(e){return Object.defineProperty(this,t,{configurable:!0,writable:!0,enumerable:!0,value:e}),e}}Object.defineProperty(e,"__esModule",{value:!0});var f=Array.prototype.slice,d=function(){function t(t,e,i){for(var r=0;r<e.length;r++){var n=e[r],o=n.decorators,a=n.key;if(delete n.key,delete n.decorators,n.enumerable=n.enumerable||!1,n.configurable=!0,("value"in n||n.initializer)&&(n.writable=!0),o){for(var l=0;l<o.length;l++){var s=o[l];if("function"!=typeof s)throw new TypeError("The decorator for method "+n.key+" is of the invalid type "+typeof s);n=s(t,a,n)||n}if(void 0!==n.initializer){i[a]=n;continue}}Object.defineProperty(t,a,n)}}return function(e,i,r,n,o){return i&&t(e.prototype,i,n),r&&t(e,r,o),e}}();e.isDescriptor=l,e.decorate=s,e.metaFor=u,e.getOwnPropertyDescriptors=c,e.createDefaultSetter=h;var p=i(9),y=r(p),g=Object.defineProperty,v=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,b=function(){function t(){o(this,t),a(this,"debounceTimeoutIds",e),a(this,"throttleTimeoutIds",e),a(this,"throttlePreviousTimestamps",e),a(this,"throttleTrailingArgs",e)}var e={};return d(t,[{key:"debounceTimeoutIds",decorators:[y.default],initializer:function(){return{}},enumerable:!0},{key:"throttleTimeoutIds",decorators:[y.default],initializer:function(){return{}},enumerable:!0},{key:"throttlePreviousTimestamps",decorators:[y.default],initializer:function(){return{}},enumerable:!0},{key:"throttleTrailingArgs",decorators:[y.default],initializer:function(){return null},enumerable:!0}],null,e),t}(),w="function"==typeof Symbol?Symbol("__core_decorators__"):"__core_decorators__",k=m?function(t){return x(t).concat(m(t))}:x;e.getOwnKeys=k},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=i(5),s=r(l),u=function(){function t(){n(this,t)}return a(t,null,[{key:"getAnimationFrame",value:function(){}},{key:"getJSON",value:function(t,e,i){var r=new Promise(function(e,i){function r(){4===this.readyState&&(200===this.status?e(this.response):i(new Error(this.statusText)))}var n=new XMLHttpRequest;n.open("GET",t),n.onreadystatechange=r,n.responseType="json",n.setRequestHeader("Accept","application/json"),n.send()});return r}},{key:"deepClone",value:function(t){var e=this,i={};if("object"!==("undefined"==typeof t?"undefined":o(t)))return null;for(var r in t)t.hasOwnProperty(r)&&"object"!==o(t[r])?i[r]=t[r]:t[r].constructor.toString().indexOf("Object")>0?i[r]=this.deepClone(t[r]):Array.isArray(t[r])&&(i[r]=t[r].map(function(t){return"object"!==("undefined"==typeof t?"undefined":o(t))?t:e.deepClone(t)}));return i}},{key:"isChanged",value:function(t,e){return JSON.stringify(t)!=JSON.stringify(e)&&(console.warn("chartData changed.."),!0)}},{key:"setIconDiv",value:function(t,e){var i=s.default.Sprites;if(e&&i[e]){var r=i[e],n=document.createElement("div");n.style.width=r.width+"px",n.style.height=r.height+"px",n.style.overflow="hidden";var o=document.createElement("img");o.src=s.default.SpritesUrl+".png",o.style.marginLeft="-"+r.x+"px",o.style.marginTop="-"+r.y+"px",n.appendChild(o),t.appendChild(n)}}},{key:"setResource",value:function(t,e){if(e instanceof Array)for(var i=0;i<e.length;i++){var r=this.getFiletype(e[i]);if(""!==r){var n=document.createElement(r);n.style.width=n.style.height=t.style.width=t.style.height="60px",n.style.borderRadius="50%",n.src=e[i],t.style.borderRadius="50%",t.appendChild(n)}"video"==r&&ele.setAttribute("autoplay",!0)}}},{key:"getFiletype",value:function(t){var e=!!t.match(/\.(jpg)|(png)|(gif)/g),i=!!t.match(/\.mp4\?+/g);return e?"img":i?"video":(console.log("filetype of "+t+" is not supported"),"")}},{key:"setChart",value:function(t,e,i,r){if(void 0==Chart)return void console.warn("Chart module "+Chart.toString()+" not defined or data invalid: "+e.toString());var n=document.createElement("canvas"),o=n.getContext("2d");new Chart(o,{type:i,data:e,options:{legend:{display:!1}}});n.height=r,n.style.height=n.height+"px",n.width=r,n.style.width=n.width+"px",t.appendChild(n)}},{key:"rdObjs",value:function(t,e){var i=[];if(!e)return i;for(var r=0;r<t;r++)i.push({name:"line"+r.toString(),lon:parseInt((8*Math.random()+e[0]-4).toFixed(2)),lat:parseInt((4*Math.random()+e[1]-2).toFixed(2)),color:"rgba(10,200,"+(251*Math.random()).toFixed(0)+",0.7)"});return i.push({name:"circle1",lon:e[0],lat:e[1],radius:parseInt(10*Math.random()),color:"rgba(251,200,20,0.6)"}),i}},{key:"loadImageAsync",value:function(t,e,i){return new Promise(function(e,i){var r=new Image;r.onload=e,r.onerror=i,r.src=t})}},{key:"readonly",value:function(t,e,i){return i.writable=!1,i}},{key:"log",value:function(t,e,i){var r=i.value;i.value=function(){return console.log('Calling "'+e+'" with',arguments),r.apply(null,arguments)}}},{key:"debounce",value:function(t,e){var i=void 0;return function(){var r=this,n=arguments;clearTimeout(i),i=setTimeout(function(){t.apply(r,n)},e)}}}]),t}();e.default=u},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t){var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-in",t.globalAlpha=.95,t.fillRect(0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation=e}function s(t){var e=this;if(this.canvas){var i=this.canvas.getContext("2d"),r=t?t:this.data;if(!Array.isArray(r))return;this.shadow?(l(i),i.save()):i.clearRect(0,0,this.canvas.width,this.canvas.height),u(i,this.blurWidth,"rgba(255,255,255,.4");for(var n=function(t){var n=r[t][e.xfield],o=r[t][e.yfield],a=r[t].radius||3,l=r[t].icon,s=r[t].name,u=r[t].direction||0;a=Math.abs(a);var c=e.lnglat2pix(n,o);if(null==c)return"continue";if(i.fillStyle=r[t].color||"rgba(255,240,4,.9)",i.beginPath(),void 0!==s&&s.startsWith("Play")&&(a=.75*d),void 0!==l){i.save(),i.translate(c[0],c[1]),i.rotate(u*Math.PI/180);var h=l.height>l.width?l.width:l.height;try{i.drawImage(l,0,0,h,h,-d/2,-d/2,d,d)}catch(t){console.warn("ctx.drawImage.. error.")}i.restore()}else i.arc(c[0],c[1],a,0,2*Math.PI),i.fill();e.keepTrack&&0==e.tracks.length?(e.initTrackCtx(),e.trackCtx.moveTo(c[0],c[1]),e.tracks.push([n,o])):e.trackCtx&&(e.trackCtx.lineTo(c[0],c[1]),e.tracks.push([n,o]),setTimeout(function(){e.trackCtx.stroke(),e.trackCtx.beginPath(),e.trackCtx.moveTo(c[0],c[1])},0)),void 0!==s&&e.labelOn&&i.strokeText(s,c[0],c[1])},o=0;o<r.length;o++){n(o)}this.shadow&&i.restore()}}function u(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(255,255,255,.8)";void 0!==t&&(t.linecap="round",t.shadowBlur=e,t.shadowColor=i,t.strokeStyle="rgba(255,255,255,.9)",t.fillStyle="rgba(255,240,91,.8)")}Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasOverlayer=void 0;var c=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(7),f=r(h),d=(e.CanvasOverlayer=function(t){function e(t){n(this,e);var i=t||{},r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.canvas=r._init(),r.redraw=i.render?i.render:s.bind(r),r.data=i.data?i.data:null,r.labelOn=i.labelOn||!1,r.xfield=i.xfield||"lon",r.yfield=i.yfield||"lat",r.shadow=void 0!=i.shadow&&i.shadow,r.lineColor=i.lineColor,r.blurWidth=void 0!=i.blurWidth?i.blurWidth:4,r.keepTrack=void 0!=i.keepTrack&&i.keepTrack,r.keepTrack&&(r.trackLayer=r._init(),r._initTrackCtx()),r.tracks=[],r.initTrackCtx=r._initTrackCtx.bind(r),i&&i.map&&(r.setMap(i.map),console.warn("register map moveend rerender handler.."),i.map.on("move",function(){r.redraw(),r.redrawTrack()})),r.redraw(),r}return a(e,t),c(e,[{key:"_init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.map._canvasContainer),e=this.map._canvas,i=document.createElement("canvas");return i.style.position="absolute",i.className="overlay-canvas",i.width=parseInt(e.style.width),i.height=parseInt(e.style.height),t.appendChild(i),i}},{key:"_transformLnglat",value:function(){var t=this;if(Array.isArray(this.data)){console.warn("transformed lnglat data to pix..");var e=this.data.map(function(e){return t.lnglat2pix(e[0],e[1])});return e}}},{key:"_initTrackCtx",value:function(){this.trackLayer&&(this.trackCtx=this.trackLayer.getContext("2d"),this.movedTo=!1,u(this.trackCtx,this.blurWidth,"rgba(255,255,255,.4"),this.trackCtx.lineWidth=this.lineWidth||3,this.trackCtx.strokeStyle=this.lineColor||"rgba(255,255,20,.6)",this.trackCtx.beginPath())}},{key:"setTracks",value:function(t){if(Array.isArray(t))return this.tracks=t,this}},{key:"getTracks",value:function(){return this.tracks}},{key:"redrawTrack",value:function(){if(this.trackCtx&&this.tracks&&this.tracks.length>0){var t=[0,0];this.trackCtx.clearRect(0,0,this.trackLayer.width,this.trackLayer.height),this.trackCtx.beginPath(),t=this.lnglat2pix(this.tracks[0][0],this.tracks[0][1]),this.trackCtx.moveTo(t[0],t[1]);for(var e=1;e<this.tracks.length;e++)t=this.lnglat2pix(this.tracks[e][0],this.tracks[e][1]),this.trackCtx.lineTo(t[0],t[1]);this.trackCtx.stroke()}}}]),e}(f.default),32)},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){var e=t||{};this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){i(this,t)}return n(t,null,[{key:"init",value:function(e){e instanceof HTMLCanvasElement?(t.canv=e,t.height=e.height,t.width=e.width,t.ctx=e.getContext("2d"),t.ctx.strokeStyle="rgba(0,0,0,0.9)",t.ctx.fillStyle="rgba(10,200,240,0.4)",t.ctx.strokeWidth=1,t.animate=!1,t.img=new Image):console.error("ele is not instanceof CANVAS")}},{key:"setStroke",value:function(e){t.ctx&&(t.ctx.strokeStyle=e)}},{key:"setFill",value:function(e){t.ctx&&(t.ctx.fillStyle=e)}},{key:"setWidth",value:function(e){t.ctx&&(t.ctx.lineWidth=e,t.ctx.strokeWidth=e)}},{key:"drawPoint",value:function(e,i,r,n,o,a){var l=void 0,s=void 0;if(t.setFill("#EEE"),t.setStroke("#EE1"),e instanceof Array&&2==e.length){if(t.ctx.beginPath(),n){t.img.src=n,i?(l=i,s=i):(l=t.img.width,s=t.img.height);var u=t.height-e[1];return o&&t.rotateCtx(e,o),t.ctx.drawImage(t.img,parseInt(e[0]),parseInt(u),l,s),void(o&&t.restore(e))}var c=t.height-e[1];if(t.ctx.arc(parseInt(e[0]),parseInt(c),i,0,2*Math.PI),"number"==typeof o){var h=o%(2*Math.PI)-Math.PI/2;t.ctx.arc(parseInt(e[0]),parseInt(c),i+2,h-Math.PI/4,h+Math.PI/4)}a&&t.ctx.fillText(a,e[0],parseInt(c)-4),r?t.ctx.fill():t.ctx.stroke()}}},{key:"restore",value:function(e){var i=t.height-e[1];t.ctx.translate(parseInt(-e[0]),parseInt(-i)),t.ctx.restore()}},{key:"rotateCtx",value:function(e,i){t.ctx.save();var r=t.height-e[1];t.ctx.translate(parseInt(e[0]),parseInt(r)),t.ctx.rotate(i)}},{key:"drawBar",value:function(e,i,r,n){var o=t.height-r;n?t.ctx.fillRect(e,o,i,r):t.ctx.strokeRect(e,o,i,r)}},{key:"drawRect",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new r(e),o=n.maxX-n.minX,a=n.maxY-n.minY;i?t.ctx.fillRect(n.minX,n.minY,o,a):t.ctx.strokeRect(n.minX,n.minY,o,a)}},{key:"drawLine",value:function(e,i,r,n){if(e instanceof Array&&e.length>0){t.ctx.strokeStyle="#FF0000",t.ctx.lineWidth=i?i:2,t.ctx.beginPath(),n&&t.ctx.moveTo(-100,t.height);for(var o=0;o<e.length;o++)if(e[o]instanceof Array&&2==e[o].length){var a=t.height-e[o][1];t.ctx.lineTo(e[o][0],a)}n?(t.ctx.lineTo(e[e.length-1][0],t.height),t.ctx.closePath(),t.ctx.fill()):t.ctx.stroke()}}},{key:"drawBars",value:function(e,i){t.clearCanv(),t.ctx.strokeStyle="#000",t.setWidth(2);var r=10;if(e instanceof Array)for(var n=(t.width-20)/e.length,o=.7*n,a=0;a<e.length;a++)t.drawBar(r,o,e[a]),r+=n;else console.error("pls Input Array Data");console.warn("Bars rendered complete..")}},{key:"clearCanv",value:function(){t.ctx.clearRect(0,0,t.width,t.height)}}]),t}();e.default=o},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(){i(this,t)};e.default=r,r.DroneParam={MAXSPEED:15,FIRINGTIME:800,LIFE:10,RANGE:.2},r.Images={Plane:"../assets/plane"},r.FileType={png:"IMG",jpg:"IMG",gif:"IMG",mp4:"VIDEO"},r.SpritesUrl="https://alex2wong.github.io/mapbox-plugins/assets/sprite",r.Sprites={"airfield-15":{width:21,height:21,x:0,y:0,pixelRatio:1},"airport-15":{width:21,height:21,x:21,y:0,pixelRatio:1},"alcohol-shop-15":{width:21,height:21,x:0,y:21,pixelRatio:1},"amusement-park-15":{width:21,height:21,x:21,y:21,pixelRatio:1},"aquarium-15":{width:21,height:21,x:42,y:0,pixelRatio:1},"art-gallery-15":{width:21,height:21,x:63,y:0,pixelRatio:1},"attraction-15":{width:21,height:21,x:42,y:21,pixelRatio:1},"bakery-15":{width:21,height:21,x:63,y:21,pixelRatio:1},"bank-15":{width:21,height:21,x:0,y:42,pixelRatio:1},"bar-15":{width:21,height:21,x:21,y:42,pixelRatio:1},"beer-15":{width:21,height:21,x:42,y:42,pixelRatio:1},"bicycle-15":{width:21,height:21,x:63,y:42,pixelRatio:1},"bicycle-share-15":{width:21,height:21,x:0,y:63,pixelRatio:1},"bus-15":{width:21,height:21,x:21,y:63,pixelRatio:1},"cafe-15":{width:21,height:21,x:42,y:63,pixelRatio:1},"campsite-15":{width:21,height:21,x:63,y:63,pixelRatio:1},"car-15":{width:21,height:21,x:84,y:0,pixelRatio:1},"castle-15":{width:21,height:21,x:105,y:0,pixelRatio:1},"cemetery-15":{width:21,height:21,x:126,y:0,pixelRatio:1},"cinema-15":{width:21,height:21,x:147,y:0,pixelRatio:1},"circle-15":{width:21,height:21,x:84,y:21,pixelRatio:1},"circle-stroked-15":{width:21,height:21,x:105,y:21,pixelRatio:1},"clothing-store-15":{width:21,height:21,x:126,y:21,pixelRatio:1},"college-15":{width:21,height:21,x:147,y:21,pixelRatio:1},"dentist-15":{width:21,height:21,x:84,y:42,pixelRatio:1},"doctor-15":{width:21,height:21,x:105,y:42,pixelRatio:1},"dog-park-15":{width:21,height:21,x:126,y:42,pixelRatio:1},"drinking-water-15":{width:21,height:21,x:147,y:42,pixelRatio:1},"embassy-15":{width:21,height:21,x:84,y:63,pixelRatio:1},"entrance-15":{width:21,height:21,x:105,y:63,pixelRatio:1},"fast-food-15":{width:21,height:21,x:126,y:63,pixelRatio:1},"ferry-15":{width:21,height:21,x:147,y:63,pixelRatio:1},"fire-station-15":{width:21,height:21,x:0,y:84,pixelRatio:1},"fuel-15":{width:21,height:21,x:21,y:84,pixelRatio:1},"garden-15":{width:21,height:21,x:42,y:84,pixelRatio:1},"golf-15":{width:21,height:21,x:63,y:84,pixelRatio:1},"grocery-15":{width:21,height:21,x:84,y:84,pixelRatio:1},"harbor-15":{width:21,height:21,x:105,y:84,pixelRatio:1},"heliport-15":{width:21,height:21,x:126,y:84,pixelRatio:1},"hospital-15":{width:21,height:21,x:147,y:84,pixelRatio:1},"ice-cream-15":{width:21,height:21,x:0,y:105,pixelRatio:1},"information-15":{width:21,height:21,x:21,y:105,pixelRatio:1},"laundry-15":{width:21,height:21,x:42,y:105,pixelRatio:1},"library-15":{width:21,height:21,x:63,y:105,pixelRatio:1},"lodging-15":{width:21,height:21,x:84,y:105,pixelRatio:1},"marker-15":{width:21,height:21,x:105,y:105,pixelRatio:1},"monument-15":{width:21,height:21,x:126,y:105,pixelRatio:1},"mountain-15":{width:21,height:21,x:147,y:105,pixelRatio:1},"museum-15":{width:21,height:21,x:0,y:126,pixelRatio:1},"music-15":{width:21,height:21,x:21,y:126,pixelRatio:1},"park-15":{width:21,height:21,x:42,y:126,pixelRatio:1},"pharmacy-15":{width:21,height:21,x:63,y:126,pixelRatio:1},"picnic-site-15":{width:21,height:21,x:84,y:126,pixelRatio:1},"place-of-worship-15":{width:21,height:21,x:105,y:126,pixelRatio:1},"playground-15":{width:21,height:21,x:126,y:126,pixelRatio:1},"police-15":{width:21,height:21,x:147,y:126,pixelRatio:1},"post-15":{width:21,height:21,x:0,y:147,pixelRatio:1},"prison-15":{width:21,height:21,x:21,y:147,pixelRatio:1},"rail-15":{width:21,height:21,x:42,y:147,pixelRatio:1},"rail-light-15":{width:21,height:21,x:63,y:147,pixelRatio:1},"rail-metro-15":{width:21,height:21,x:84,y:147,pixelRatio:1},"religious-christian-15":{width:21,height:21,x:105,y:147,pixelRatio:1},"religious-jewish-15":{width:21,height:21,x:126,y:147,pixelRatio:1},"religious-muslim-15":{width:21,height:21,x:147,y:147,pixelRatio:1},"restaurant-15":{width:21,height:21,x:168,y:0,pixelRatio:1},"rocket-15":{width:21,height:21,x:189,y:0,pixelRatio:1},"school-15":{width:21,height:21,x:210,y:0,pixelRatio:1},"shop-15":{width:21,height:21,x:231,y:0,pixelRatio:1},"stadium-15":{width:21,height:21,x:252,y:0,pixelRatio:1},"star-15":{width:21,height:21,x:273,y:0,pixelRatio:1},"suitcase-15":{width:21,height:21,x:294,y:0,pixelRatio:1},"swimming-15":{width:21,height:21,x:315,y:0,pixelRatio:1},"theatre-15":{width:21,height:21,x:168,y:21,pixelRatio:1},"toilet-15":{width:21,height:21,x:189,y:21,pixelRatio:1},"town-hall-15":{width:21,height:21,x:210,y:21,pixelRatio:1},"triangle-15":{width:21,height:21,x:231,y:21,pixelRatio:1},"triangle-stroked-15":{width:21,height:21,x:252,y:21,pixelRatio:1},"veterinary-15":{width:21,height:21,x:273,y:21,pixelRatio:1},"volcano-15":{width:21,height:21,x:294,y:21,pixelRatio:1},"zoo-15":{width:21,height:21,x:315,y:21,pixelRatio:1},"airfield-11":{width:17,height:17,x:168,y:42,pixelRatio:1},"airport-11":{width:17,height:17,x:185,y:42,pixelRatio:1},"alcohol-shop-11":{width:17,height:17,x:202,y:42,pixelRatio:1},"amusement-park-11":{width:17,height:17,x:219,y:42,pixelRatio:1},"aquarium-11":{width:17,height:17,x:236,y:42,pixelRatio:1},"art-gallery-11":{width:17,height:17,x:253,y:42,pixelRatio:1},"attraction-11":{width:17,height:17,x:270,y:42,pixelRatio:1},"bakery-11":{width:17,height:17,x:287,y:42,pixelRatio:1},"bank-11":{width:17,height:17,x:304,y:42,pixelRatio:1},"bar-11":{width:17,height:17,x:168,y:63,pixelRatio:1},"beer-11":{width:17,height:17,x:185,y:63,pixelRatio:1},"bicycle-11":{width:17,height:17,x:202,y:63,pixelRatio:1},"bicycle-share-11":{width:17,height:17,x:219,y:63,pixelRatio:1},"bus-11":{width:17,height:17,x:236,y:63,pixelRatio:1},"cafe-11":{width:17,height:17,x:253,y:63,pixelRatio:1},"campsite-11":{width:17,height:17,x:270,y:63,pixelRatio:1},"car-11":{width:17,height:17,x:287,y:63,pixelRatio:1},"castle-11":{width:17,height:17,x:304,y:63,pixelRatio:1},"cemetery-11":{width:17,height:17,x:168,y:84,pixelRatio:1},"cinema-11":{width:17,height:17,x:185,y:84,pixelRatio:1},"circle-11":{width:17,height:17,x:202,y:84,pixelRatio:1},"circle-stroked-11":{width:17,height:17,x:219,y:84,pixelRatio:1},"clothing-store-11":{width:17,height:17,x:236,y:84,pixelRatio:1},"college-11":{width:17,height:17,x:253,y:84,pixelRatio:1},"dentist-11":{width:17,height:17,x:270,y:84,pixelRatio:1},"doctor-11":{width:17,height:17,x:287,y:84,pixelRatio:1},"dog-park-11":{width:17,height:17,x:304,y:84,pixelRatio:1},"drinking-water-11":{width:17,height:17,x:168,y:105,pixelRatio:1},"embassy-11":{width:17,height:17,x:185,y:105,pixelRatio:1},"entrance-11":{width:17,height:17,x:202,y:105,pixelRatio:1},"fast-food-11":{width:17,height:17,x:219,y:105,pixelRatio:1},"ferry-11":{width:17,height:17,x:236,y:105,pixelRatio:1},"fire-station-11":{width:17,height:17,x:253,y:105,pixelRatio:1},"fuel-11":{width:17,height:17,x:270,y:105,pixelRatio:1},"garden-11":{width:17,height:17,x:287,y:105,pixelRatio:1},"golf-11":{width:17,height:17,x:304,y:105,pixelRatio:1},"grocery-11":{width:17,height:17,x:168,y:126,pixelRatio:1},"harbor-11":{width:17,height:17,x:185,y:126,pixelRatio:1},"heliport-11":{width:17,height:17,x:202,y:126,pixelRatio:1},"hospital-11":{width:17,height:17,x:219,y:126,pixelRatio:1},"ice-cream-11":{width:17,height:17,x:236,y:126,pixelRatio:1},"information-11":{width:17,height:17,x:253,y:126,pixelRatio:1},"laundry-11":{width:17,height:17,x:270,y:126,pixelRatio:1},"library-11":{width:17,height:17,x:287,y:126,pixelRatio:1},"lodging-11":{width:17,height:17,x:304,y:126,pixelRatio:1},"marker-11":{width:17,height:17,x:168,y:147,pixelRatio:1},"monument-11":{width:17,height:17,x:185,y:147,pixelRatio:1},"mountain-11":{width:17,height:17,x:202,y:147,pixelRatio:1},"museum-11":{width:17,height:17,x:219,y:147,pixelRatio:1},"music-11":{width:17,height:17,x:236,y:147,pixelRatio:1},"park-11":{width:17,height:17,x:253,y:147,pixelRatio:1},"pharmacy-11":{width:17,height:17,x:270,y:147,pixelRatio:1},"picnic-site-11":{width:17,height:17,x:287,y:147,pixelRatio:1},"place-of-worship-11":{width:17,height:17,x:304,y:147,pixelRatio:1},"playground-11":{width:17,height:17,x:0,y:168,pixelRatio:1},"police-11":{width:17,height:17,x:17,y:168,pixelRatio:1},"post-11":{width:17,height:17,x:34,y:168,pixelRatio:1},"prison-11":{width:17,height:17,x:51,y:168,pixelRatio:1},"rail-11":{width:17,height:17,x:68,y:168,pixelRatio:1},"rail-light-11":{width:17,height:17,x:85,y:168,pixelRatio:1},"rail-metro-11":{width:17,height:17,x:102,y:168,pixelRatio:1},"religious-christian-11":{width:17,height:17,x:119,y:168,pixelRatio:1},"religious-jewish-11":{width:17,height:17,x:136,y:168,pixelRatio:1},"religious-muslim-11":{width:17,height:17,x:153,y:168,pixelRatio:1},"restaurant-11":{width:17,height:17,x:170,y:168,pixelRatio:1},"rocket-11":{width:17,height:17,x:187,y:168,pixelRatio:1},"school-11":{width:17,height:17,x:204,y:168,pixelRatio:1},"shop-11":{width:17,height:17,x:221,y:168,pixelRatio:1},"stadium-11":{width:17,height:17,x:238,y:168,pixelRatio:1},"star-11":{width:17,height:17,x:255,y:168,pixelRatio:1},"suitcase-11":{width:17,height:17,x:272,y:168,pixelRatio:1},"swimming-11":{width:17,height:17,x:289,y:168,pixelRatio:1},"theatre-11":{width:17,height:17,x:306,y:168,pixelRatio:1},"toilet-11":{width:17,height:17,x:0,y:185,pixelRatio:1},"town-hall-11":{width:17,height:17,x:17,y:185,pixelRatio:1},"triangle-11":{width:17,height:17,x:34,y:185,pixelRatio:1},"triangle-stroked-11":{width:17,height:17,x:51,y:185,pixelRatio:1},"veterinary-11":{width:17,height:17,x:68,y:185,pixelRatio:1},"volcano-11":{width:17,height:17,x:85,y:185,pixelRatio:1},"zoo-11":{width:17,height:17,x:102,y:185,pixelRatio:1},"dot-11":{width:11,height:11,x:323,y:168,pixelRatio:1},"dot-10":{width:10,height:10,x:119,y:185,pixelRatio:1}},r.PK="pk.eyJ1IjoiaHVhbmd5aXhpdSIsImEiOiI2WjVWR1hFIn0.1P90Q-tkbHS38BvnrhTI6w"},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(5),u=r(s),c=i(10),h=r(c),f=(i(2),i(8)),d=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.life=u.default.DroneParam.LIFE,i.bullets=[],i.firing=!1,i.bulletNum=2,i.icon=u.default.Images.Plane,i.manual=!1,i}return a(e,t),l(e,[{key:"updateStatus",value:function(){var t=Math.cos(this.direction*Math.PI/180)*this.speed*.001,e=this.lat+t;(e>84||e<-84)&&(t=-t,this.direction+=180,console.warn("latitude out of bbox, turn back..")),this.lon+=Math.sin(this.direction*Math.PI/180)*this.speed*.001,this.lat+=t}},{key:"accelerate",value:function(){this.speed<u.default.DroneParam.MAXSPEED&&(this.speed+=1)}},{key:"fire",value:function(){if(this.bullets instanceof Array&&this.bullets.length>0&&!this.firing){var t=this;setTimeout(function(){t.firing=!1},u.default.DroneParam.FIRINGTIME),this.firing=!0}else if(!this.firing){for(var e=0;e<this.bulletNum;e++)this.bullets.push(new h.default(this));var i=this;setTimeout(function(){i.firing=!1},u.default.DroneParam.FIRINGTIME),this.firing=!0}}}]),e}(f.Sprite);e.default=d},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(){function t(e){i(this,t),e&&e.map&&(this.map=e.map||void 0)}return r(t,[{key:"_init",value:function(){}},{key:"setMap",value:function(t){return this.map=t,this}},{key:"lnglat2pix",value:function(t,e){if(void 0!=this.map&&this.map.project instanceof Function){var i=this.map.project(new mapboxgl.LngLat(t,e)),r=Math.round(i.x),n=Math.round(i.y);return[r,n]}return[t,e]}}]),t}();e.default=n},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){return(1e6*Math.random()).toString(16)}function n(){var t=1e4*Math.random();return"Player ".concat(t.toFixed(0))}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();e.genId=r,e.randomName=n;e.Sprite=function(){function t(e){i(this,t);var o=e||{};this.id=r(),this.speed=o.speed||1,this.direction=o.direction||0,this.name=o.name||n(),this.lon=o.lon||120,this.lat=o.lat||30,this.iconUrl=o.icon,this.icon=null,this._init()}return o(t,[{key:"_init",value:function(){var t=this,e=new Image;this.iconUrl&&(e.src=this.iconUrl,e.onload=function(){t.icon=e})}},{key:"accelerate",value:function(){}},{key:"turnLeft",value:function(){this&&(this.direction-=2)}},{key:"turnRight",value:function(){this.direction+=2}},{key:"brake",value:function(){this.speed>0&&(this.speed-=1)}}]),t}()},function(t,e,i){"use strict";function r(t,e,i){var r=i.configurable,n=i.enumerable,l=i.initializer,s=i.value;return{configurable:r,enumerable:n,get:function(){if(this!==t){var i=l?l.call(this):s;return a(this,e,{configurable:r,enumerable:n,writable:!0,value:i}),i}},set:(0,o.createDefaultSetter)(e)}}function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,o.decorate)(r,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var o=i(1),a=Object.defineProperty;t.exports=e.default},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(e){i(this,t),this.id,this.direciton=e.direction?e.direction:0,this.spoint={type:"Point",coordinates:[0,0]},this.spoint.coordinates[0]=e.lon,this.spoint.coordinates[1]=e.lat};e.default=r},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=i(4),s=r(l),u=function(){function t(e){n(this,t),this.ele=e.ele?e.ele:null,this.data=e.data?e.data:[],this.type=e.type?e.type:null,this.maxValue=0,this.rotate=e.rotate?e.rotate:0,this.url=e.url?e.url:null}return a(t,[{key:"updateData",value:function(){}},{key:"setData",value:function(t){return this.data=t.coords,this.rotate=t.rotate,this.dataName=t.name,s.default.clearCanv(),this.render(),this}},{key:"render",value:function(){this.data instanceof Array&&this.data.length>0&&this.data[0]instanceof Array?s.default.drawLine(this.data,null,null):this.data instanceof Array&&this.data.length>0&&(this.url?s.default.drawPoint(this.data,20,null,this.url,this.rotate,this.dataName):s.default.drawPoint(this.data,2,null,null,this.rotate,this.dataName))}},{key:"statMax",value:function(){var t=this;return o(this.data)==Array&&this.data.length>0&&this.data.forEach(function(e){t.maxValue<e&&(t.maxValue=e)}),this}},{key:"generateSinLine",value:function(t,e,i,r){for(var n=[],o=0,a=50,l=50,s=i?i:20,u=r?r:0,c=0;c<e;c++)"sin"==t?o=parseInt(Math.sin(c/s)*a):"cos"==t?o=parseInt(Math.cos(c/s)*a):"tan"==t&&(o=parseInt(Math.tan(c/s)*a)),n.push([c-u,o+l]);return n}}]),t}();e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={"custom-tms":{type:"raster",tiles:["http://www.google.cn/maps/vt?lyrs=s@702&gl=cn&x={x}&y={y}&z={z}"],tileSize:256}},r={"custom-tms":{type:"raster",tiles:["https://cartodb-basemaps-1.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},n={"custom-tms":{type:"raster",tiles:["https://cartodb-basemaps-2.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},o="pk.eyJ1IjoiaHVhbmd5aXhpdSIsImEiOiI2WjVWR1hFIn0.1P90Q-tkbHS38BvnrhTI6w",a={
version:8,sprite:"https://alex2wong.github.io/mapbox-plugins/assets/sprite",glyphs:"https://alex2wong.github.io/mapbox-plugins/{fontstack}/{range}.pbf",sources:i,layers:[{id:"custom-tms",type:"raster",source:"custom-tms",paint:{}}]},l={version:8,sprite:"https://alex2wong.github.io/mapbox-plugins/assets/sprite",glyphs:"https://alex2wong.github.io/mapbox-plugins/{fontstack}/{range}.pbf",sources:r,layers:[{id:"custom-tms",type:"raster",source:"custom-tms",paint:{}}]},s={version:8,sprite:"https://alex2wong.github.io/mapbox-plugins/assets/sprite",glyphs:"https://alex2wong.github.io/mapbox-plugins/{fontstack}/{range}.pbf",sources:n,layers:[{id:"custom-tms",type:"raster",source:"custom-tms",paint:{}}]},u={version:8,sprite:"https://alex2wong.github.io/mapbox-plugins/assets/sprite",glyphs:"https://alex2wong.github.io/mapbox-plugins/{fontstack}/{range}.pbf",sources:r,layers:[]};e.tk=o,e.basicStyle=a,e.lightStyle=l,e.darkStyle=s,e.emptyStyle=u},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(6),l=r(a),s=(i(22),i(3)),u=25,c=function(){function t(){n(this,t)}return o(t,null,[{key:"gameControl",value:function(t){if(t instanceof l.default!=!0)return void console.error("gameControl must bind with a drone instance.");t.u=t.r=t.d=t.l=0,onkeydown=function(t){return e(t,1)},onkeyup=function(t){return e(t)};var e=function(e,i,r,n){for(n in r={u:[38,90,87],r:[39,68],d:[40,83],l:[37,65,81]})r[n].includes(e.keyCode)&&(t[n]=i)};setInterval(function(){t.u&&t.accelerate(),t.d&&t.brake(),t.r&&t.turnRight(),t.l&&t.turnLeft()},u),console.log("gameControl register success.")}},{key:"pickupControl",value:function(t){if(t instanceof s.CanvasOverlayer){t.lnglat2pix(t.source[0].lon,t.source[1].lat)}}},{key:"bulletCalculator",value:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var i=drone[e],r=i.bullets;i.firing&&r}}},{key:"addRobots",value:function(t){var e=new l.default({});return e}},{key:"dashBoard",value:function(t,e){if(t instanceof l.default!=!0)return void console.error("dashBoard must bind with a drone instance.");try{setInterval(function(){e.innerHTML=t.name+"<br> coords: "+t.lon.toFixed(1)+", "+t.lat.toFixed(1)+"<br>speed: "+t.speed+"<br>direction: "+(t.direction%360).toFixed(1)},200)}catch(t){console.error(t)}console.log("dashBoard register success.")}},{key:"featureList",value:function(t){if(void 0==t||"string"!=typeof t)return console.warn("invalid containerId.."),null}}]),t}();e.default=c},function(t,e,i){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.xMarker=e.drawArrowLine=e.Config=e.rbush=e.WindLayer=e.DomOverlayer=e.CanvasOverlayer=e.myTween=e.Controllers=e.Util=e.Chart=e.Canvas=e.Drone=void 0;var o=i(6),a=n(o),l=i(18),s=n(l),u=i(4),c=n(u),h=i(11),f=n(h),d=i(2),p=n(d),y=i(13),g=n(y),v=i(19),x=i(3),m=i(16),b=i(17),w=i(12),k=r(w),_=i(15),O=i(38);"undefined"!=typeof mapboxgl&&(mapboxgl.accessToken=k.tk),e.Drone=a.default,e.Canvas=c.default,e.Chart=f.default,e.Util=p.default,e.Controllers=g.default,e.myTween=v.myTween,e.CanvasOverlayer=x.CanvasOverlayer,e.DomOverlayer=m.DomOverlayer,e.WindLayer=b.WindLayer,e.rbush=O,e.Config=k,e.drawArrowLine=_.drawArrowLine,e.xMarker=s.default},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=.5;r=r<1?r+.01:.5;for(var o=1;o<e.length;o+=1)l(t,e[o-1],e[o],r);i&&requestAnimationFrame(n)}function o(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1],void 0);if(this.canvas&&(e=this.canvas.getContext("2d")),e instanceof CanvasRenderingContext2D){e.clearRect(0,0,this.canvas.width,this.canvas.height),a(e);var i=[0,0];if(!Array.isArray(this.data))return;i=this.data.map(function(e){return t.lnglat2pix(e[0],e[1])}),e.beginPath(),e.moveTo(i[0][0],i[0][1]);for(var r=1;r<i.length;r+=1)e.lineTo(i[r][0],i[r][1]);e.stroke(),e.closePath(),f(e,i)}}function a(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.strokeStyle="green",t.setLineDash([]),t.globalAlpha=.95,t.globalCompositeOperation="source-over",e?(console.warn("enabling line shadowBlur"),t.shadowBlur=4,t.shadowColor="#0f0"):t.shadowBlur=0,t.lineCap="round",t.lineJoin="round",t.lineWidth=12}function l(t,e,i,r){var n=new Image;n.src="../../assets/arrowright.png",n.onload=function(){s(e,i,30,t,r,n)}}function s(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=arguments[5],a=Math.atan((e[1]-t[1])/(e[0]-t[0]));e[0]-t[0]<0&&(a+=Math.PI);for(var l=u(t,e),s=[],c=l/i,h=function(t,e){o&&r&&(r.save(),r.translate(t,e),r.rotate(a),r.drawImage(o,-o.width/2,-o.width/2),r.restore())},f=n;f<=c;f+=1){var d=Math.round(t[0]+f*i*Math.cos(a)),p=Math.round(t[1]+f*i*Math.sin(a));s.push([d,p]),h(d,p)}return s}function u(t,e){return Math.sqrt(Math.pow(e[1]-t[1],2)+Math.pow(e[0]-t[0],2))}Object.defineProperty(e,"__esModule",{value:!0}),e.drawArrowLine=o;var c=i(2),h=r(c),f=function(){};h.default&&(f=h.default.debounce(n,100))},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(){var t=this.domOpts;if(t&&Array.isArray(t))for(var e=0;e<t.length;e++){var i=t[e];if(void 0!=("undefined"==typeof i?"undefined":c(i))){var r=i.lon,n=i.lat,o=this.lnglat2pix(r,n);if(null!=o){var a=i.icon,l=i.resources,h=i.style?i.style+" animated":"bounceIn animated",f=i.data,d=i.type,p=this.doms[3*e]||document.createElement("div"),m=this.doms[3*e+1]||document.createElement("div"),b=this.doms[3*e+2]||document.createElement("div");s(m,b,p,o,d||l);var w=y.default.deepClone(f);if(void 0!=l?(p.title=i.content||"",p.hasChildNodes()&&p.firstChild.src===l[0]||y.default.setResource(p,l)):void 0!=a?(p.innerHTML=(i.content||"")+"</br>",y.default.setIconDiv(p,a)):void 0!=f&&void 0!=d?y.default.isChanged(this.lastData[e],f)&&(y.default.setChart(p,w,d,2*x),this.lastData[e]=f):p.innerHTML=(i.content||"")+"</br>",void 0!=d&&u(p),m.className="dom-ele",b.className="dom-ele",m.style.left=o[0]+"px",m.style.top=o[1]-(g-10)+"px",b.style.left=o[0]-v+"px",b.style.top=o[1]-v+"px",void 0==this.doms[3*e]){var k;p.className="dom-popup "+h,m.className=b.className="dom-ele "+h,console.warn("add "+h+" css to dom."),this.domContainer.appendChild(p),this.domContainer.appendChild(m),this.domContainer.appendChild(b),(k=this.doms).push.apply(k,[p,m,b])}}}}}function s(t,e,i,r,n){var o=Array.isArray(n);t.style.height=g-10+"px",t.style.width="1px",t.style.position="absolute",e.style.borderRadius="50%",e.style.width=e.style.height=2*v+"px",e.style.position="absolute",i.style.position="absolute",n||(i.style.minWidth="100px"),i.style.background="#fff",i.style.textAlign="center",i.style.padding="3px",i.style.left=r[0]-(o?x/2:x)+"px",i.style.top=r[1]-g-(n?x:20)+"px"}function u(t){t.style.borderWidth="0",t.style.zIndex=9999,t.style.backgroundColor="rgba(0,0,0,0.0)"}Object.defineProperty(e,"__esModule",{value:!0}),e.DomOverlayer=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),f=i(7),d=r(f),p=i(2),y=r(p),g=(e.DomOverlayer=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.domContainer=i._init(),i.redraw=l.bind(i),i.domOpts=t.doms,t&&t.map&&(i.setMap(t.map),t.map.on("move",i.redraw)),i.doms=[],i.lastData=[],i.redraw(),console.log("Dom overlayer add to Map..."),i}return a(e,t),h(e,[{key:"_init",value:function(){var t=this.map._canvasContainer,e=this.map._canvas,i=document.createElement("div");return i.style.position="absolute",i.className="overlay-dom",i.style.width=e.style.width,i.style.height="0",t.parentElement.appendChild(i),i}},{key:"setDoms",value:function(t){Array.isArray(t)&&(this.domOpts=t,this.clearDoms(),this.redraw())}},{key:"findDom",value:function(t){for(var e=0;e<this.doms.length;e++)try{if(this.doms[e]===t)return this.doms[e]}catch(t){}}},{key:"clearDoms",value:function(){for(var t=0;t<this.doms.length;t++)this.domContainer.removeChild(this.doms[t]);this.doms=[]}}]),e}(d.default),60),v=4,x=60},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e,i,r){var n=t||this.windImage,o=document.createElement("canvas"),a=o.getContext("2d"),l=[],s=[];e&&(l={type:"FeatureCollection",name:"particles",features:s}),o.width=n.width,o.height=n.height,a.drawImage(n,0,0);var u=a.getImageData(0,0,o.width,o.height);u.data.byteLength;(void 0==i||void 0!==i&&i<1)&&(console.warn("Input compressRatio invalid, use default 1."),i=1),i=parseInt(Number(i));for(var c=1;c<o.height-1;c+=i)for(var h=0;h<o.width;h+=i){var f={lon:-180+h,lat:-90+c},d=4*(360*c+h),p=d+1,y=u.data[d],g=u.data[p],v=Math.pow(y,2)+Math.pow(g,2),x=Number(Math.atan(g/y).toFixed(2)),m="rgba("+(v/255).toFixed(0)+", 255, 100, 0.7)";e?(f={type:"Feature",properties:{angle:x,color:m},geometry:{type:"Point",coordinates:[-180+h,-90+c]}},s.push(f)):(f.color=m,f.angle=x,f.radius=r,l.push(f))}return l}Object.defineProperty(e,"__esModule",{value:!0}),e.WindLayer=void 0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(3);e.WindLayer=function(t){function e(t){r(this,e);var i=t||{},o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return o.windImage=i.image||new Image,o.radius=i.radius||2,o}return o(e,t),l(e,[{key:"updateWind",value:function(t,e,i){this.canvas,this.canvas.getContext("2d");void 0==this.particles&&(console.log("generating particles..."),this.particles=a(t,e,i,this.radius)),e?console.log("generating particles complete! num: "+this.particles.features.length+" in geojson."):(console.log("generating particles complete! num: "+this.particles.length),this.redraw(this.particles))}}]),e}(s.CanvasOverlayer)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var i=e.map.getPitch(),r=e.map.getBearing(),n=t.getElement().children[0],o=-r+(e.iconRotateOffset||0);n.style.transform="rotateX("+i+"deg) rotateZ("+o+"deg)"}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(8),u=function(t){function e(t,i){var o;r(this,e);var a=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return a.map=i.map,o=a.genMarker(t,i),n(a,o)}return o(e,t),l(e,[{key:"genMarker",value:function(t,e){if(t instanceof Object&&void 0!==t.properties){var i=document.createElement("div");i.className="marker",t.properties.iconSize||(t.properties.iconSize=[32,32]),i.style.width=t.properties.iconSize[0]+"px",i.style.height=t.properties.iconSize[1]+"px";var r=document.createElement("div");if(r.className="marker__inner",r.style.backgroundColor=""+(e.backgroundColor||"rgb(255, 0, 87)"),r.style.backgroundImage="url("+(e.icon||"../../assets/arrow2x.png")+")",i.appendChild(r),e.map instanceof mapboxgl.Map){var n=new mapboxgl.Marker(i).setLngLat(t.geometry.coordinates).addTo(e.map);return a(n,e),e.map.on("rotate",function(){a(n,e)}),n}}else console.warn(t+" is not invalid GeoJson instance..")}}]),e}(s.Sprite);e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=e.myTween={fps:30,objs:null,get:function(t){return this.objs=t,this},to:function(t,e,n){if(this.lastAniParams=[t,e],void 0!=t&&void 0!=e&&null!=r.objs){var o=function(){var t=!1,e=!1;if(s>=l)if(r.loop){s=0;for(var i=0;i<r.objs.length;i++)r.objs[i]=Object.assign([],r.objs[i],u[i]);console.warn("animation reset ...")}else r.paused=!0,clearInterval(r.timer),r.timerOn=!1,console.warn("animation end !!!");else if(0==s?t=!0:s==l-1&&(e=!0),1!=r.speed,!r.paused){for(var i=0;i<r.objs.length;i++)for(var o in c[i])r.objs[i][o]+=c[i][o];n&&n instanceof Function&&n(r.objs,e,t),s+=1}},a=1e3/r.fps,l=e/1e3*r.fps,s=0,u=[],c=[];console.log("animation params init complete...");for(var h=0;h<r.objs.length;h++)for(var f in t[h])"number"==typeof t[h][f]&&("object"!=i(u[h])&&(u[h]={}),"object"!=i(c[h])&&(c[h]={}),u[h][f]=r.objs[h][f],c[h][f]=parseFloat(((t[h][f]-r.objs[h][f])*(1/l)).toFixed(3)));return new Promise(function(t,i){r.timer=setInterval(o,a),r.timerOn=!0,r.paused=!1,setTimeout(t,e)})}},loop:!1,speed:1,timerOn:!1,timer:null,paused:!1,wait:function(t,e){var e=e||0;return new Promise(function(i,n){setTimeout(function(){t instanceof Object?r.objs=Object.assign(r.objs,t):t instanceof Function&&console.log("execute Func await.."),t.call(this),i()},e)})},toggleAni:function(t){if(void 0==t)this.paused=!this.paused;else{this.paused=t}},toggleLoop:function(t){return void 0!=t?void(this.loop=t):void(this.loop=!this.loop)},lastAniParams:[void 0,void 0]};e.sleep=function(t,e){return new Promise(function(i,r){setTimeout(function(){e&&e instanceof Function?i(e()):i()},t)})}},function(t,e){"use strict";function i(t,e){var i=t.prototype;for(var o in e)for(var a=e[o],l=0,s=a.length;l<s;l++){var u=a[l];r(i,o,u(i,o,n(i,o)))}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor;t.exports=e.default},function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function n(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}}function o(t,e){if("undefined"==typeof WeakMap)throw new Error("Using @autobind on "+e.name+"() requires WeakMap support due to its use of super."+e.name+"()\n      See https://github.com/jayphelps/core-decorators.js/issues/20");d||(d=new WeakMap),d.has(t)===!1&&d.set(t,new WeakMap);var i=d.get(t);return i.has(e)===!1&&i.set(e,n(e,t)),i.get(e)}function a(t){for(var e=(0,c.getOwnPropertyDescriptors)(t.prototype),i=(0,c.getOwnKeys)(e),r=0,n=i.length;r<n;r++){var o=i[r],a=e[o];"function"==typeof a.value&&"constructor"!==o&&h(t.prototype,o,l(t.prototype,o,a))}}function l(t,e,i){var r=i.value,a=i.configurable,l=i.enumerable;if("function"!=typeof r)throw new SyntaxError("@autobind can only be used on functions, not: "+r);var s=t.constructor;return{configurable:a,enumerable:l,get:function(){if(this===t)return r;if(this.constructor!==s&&f(this).constructor===s)return r;if(this.constructor!==s&&e in this.constructor.prototype)return o(this,r);var i=n(r,this);return h(this,e,{configurable:!0,writable:!0,enumerable:!1,value:i}),i},set:(0,c.createDefaultSetter)(e)}}function s(t){return 1===t.length?a.apply(void 0,r(t)):l.apply(void 0,r(t))}function u(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return 0===e.length?function(){return s(arguments)}:s(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var c=i(1),h=Object.defineProperty,f=Object.getPrototypeOf,d=void 0;t.exports=e.default},function(t,e,i){/**
	 * core-decorators.js
	 * (c) 2016 Jay Phelps and contributors
	 * MIT Licensed
	 * https://github.com/jayphelps/core-decorators.js
	 * @license
	 */
"use strict";function r(t){return t&&t.__esModule?t.default:t}Object.defineProperty(e,"__esModule",{value:!0});var n=i(32);e.override=r(n);var o=i(25);e.deprecate=r(o),e.deprecated=r(o);var a=i(34);e.suppressWarnings=r(a);var l=i(28);e.memoize=r(l);var s=i(21);e.autobind=r(s);var u=i(33);e.readonly=r(u);var c=i(26);e.enumerable=r(c);var h=i(31);e.nonenumerable=r(h);var f=i(30);e.nonconfigurable=r(f);var d=i(23);e.debounce=r(d);var p=i(35);e.throttle=r(p);var y=i(24);e.decorate=r(y);var g=i(29);e.mixin=r(g),e.mixins=r(g);var v=i(9);e.lazyInitialize=r(v);var x=i(36);e.time=r(x);var m=i(27);e.extendDescriptor=r(m);var b=i(20);e.applyDecorators=r(b)},function(t,e,i){"use strict";function r(t,e,i,r){var n=o(r,2),u=n[0],c=void 0===u?s:u,h=n[1],f=void 0!==h&&h,d=i.value;if("function"!=typeof d)throw new SyntaxError("Only functions can be debounced");return a({},i,{value:function(){var t=this,i=(0,l.metaFor)(this),r=i.debounceTimeoutIds,n=r[e],o=f&&!n,a=arguments;clearTimeout(n),r[e]=setTimeout(function(){delete r[e],f||d.apply(t,a)},c),o&&d.apply(this,a)}})}function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,l.decorate)(r,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],r=!0,n=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};e.default=n;var l=i(1),s=300;t.exports=e.default},function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function n(t){return Array.isArray(t)?t:Array.from(t)}function o(t,e,i,o){var a=n(o),u=a[0],c=a.slice(1),h=i.configurable,f=i.enumerable,d=i.writable,p=i.get,y=i.set,g=i.value,v=!!p;return{configurable:h,enumerable:f,get:function(){var t=v?p.call(this):g,i=u.call.apply(u,[this,t].concat(r(c)));if(v)return i;var n={configurable:h,enumerable:f};return n.value=i,n.writable=d,s(this,e,n),i},set:v?y:(0,l.createDefaultSetter)()}}function a(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,l.decorate)(o,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var l=i(1),s=Object.defineProperty;t.exports=e.default},function(t,e,i){"use strict";function r(t,e,i,r){var n=o(r,2),l=n[0],u=void 0===l?s:l,c=n[1],h=void 0===c?{}:c;if("function"!=typeof i.value)throw new SyntaxError("Only functions can be marked as deprecated");var f=t.constructor.name+"#"+e;return h.url&&(u+="\n\n    See "+h.url+" for more details.\n\n"),a({},i,{value:function(){return console.warn("DEPRECATION "+f+": "+u),i.value.apply(this,arguments)}})}function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,l.decorate)(r,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],r=!0,n=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};e.default=n;var l=i(1),s="This function will be removed in future versions.";t.exports=e.default},function(t,e,i){"use strict";function r(t,e,i){return i.enumerable=!0,i}function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,o.decorate)(r,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var o=i(1);t.exports=e.default},function(t,e,i){"use strict";function r(t,e,i){var r=l(t),n=s(r,e);return o({},n,{value:i.value,initializer:i.initializer,get:i.get||n.get,set:i.set||n.set})}function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,a.decorate)(r,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};e.default=n;var a=i(1),l=Object.getPrototypeOf,s=Object.getOwnPropertyDescriptor;t.exports=e.default},function(t,e,i){"use strict";function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){return e===Object(e)?e:t[e]||(t[e]={})}function o(t,e,i,r,n){var o=e.apply(t,i);return r[n]=o,o}function a(t){var e=void 0,i=void 0;return t.value?(e=t.value,i="value"):t.get?(e=t.get,i="get"):t.set&&(e=t.set,i="set"),{fn:e,wrapKey:i}}function l(t,e,i){console.warn("DEPRECATION: @memoize is deprecated and will be removed shortly. Use @decorate with lodash's memoize helper.\n\n  https://github.com/jayphelps/core-decorators.js#decorate");var l=a(i),s=l.fn,c=l.wrapKey,h=new WeakMap,f=Object.create(null),d=Object.create(null),p=0;return u({},i,r({},c,function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var r="0",a=0,l=e.length;a<l;a++){var u=e[a],c=n(d,u),y=h.get(c);void 0===y&&(y=++p,h.set(c,y)),r+=y}return f[r]||o(this,s,arguments,f,r)}))}function s(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,c.decorate)(l,e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};e.default=s;var c=i(1);t.exports=e.default},function(t,e,i){"use strict";function r(t){return"[object Symbol]"===Object.prototype.toString.call(t)&&"object"==typeof t}function n(t,e){if(r(t)){do{if(e===Object.prototype)return"undefined"!=typeof e[t];if(e.hasOwnProperty(t))return!0}while(e=u(e));return!1}return t in e}function o(t,e){if(!e.length)throw new SyntaxError("@mixin() class "+t.name+" requires at least one mixin as an argument");for(var i=0,r=e.length;i<r;i++)for(var o=(0,l.getOwnPropertyDescriptors)(e[i]),a=(0,l.getOwnKeys)(o),u=0,c=a.length;u<c;u++){var h=a[u];n(h,t.prototype)||s(t.prototype,h,o[h])}}function a(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return"function"==typeof e[0]?o(e[0],[]):function(t){return o(t,e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var l=i(1),s=Object.defineProperty,u=Object.getPrototypeOf;t.exports=e.default},function(t,e,i){"use strict";function r(t,e,i){return i.configurable=!1,i}function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,o.decorate)(r,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var o=i(1);t.exports=e.default},function(t,e,i){"use strict";function r(t,e,i){return i.enumerable=!1,i}function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,o.decorate)(r,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var o=i(1);t.exports=e.default},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){return t.hasOwnProperty("value")?"data":t.hasOwnProperty("get")||t.hasOwnProperty("set")?"accessor":"data"}function o(t,e,i){i.assert(t.length===e.length)}function a(t,e,i){var r=typeof t.value,n=typeof e.value;if("undefined"===r&&"undefined"===n&&i.error("descriptor values are both undefined. (class properties are are not currently supported)'"),r!==n){var a="function"===n&&void 0===r;(a||void 0!==r)&&i.error('value types do not match. {parent} is "'+r+'", {child} is "'+n+'"')}switch(n){case"function":o(t.value,e.value,i);break;default:i.error('Unexpected error. Please file a bug with: {parent} is "'+r+'", {child} is "'+n+'"')}}function l(t,e,i){var r="function"==typeof t.get,n="function"==typeof e.get,a="function"==typeof t.set,l="function"==typeof e.set;(r||n)&&(!r&&a&&i.error("{parent} is setter but {child} is getter"),!n&&l&&i.error("{parent} is getter but {child} is setter"),o(t.get,e.get,i)),(a||l)&&(!a&&r&&i.error("{parent} is getter but {child} is setter"),!l&&n&&i.error("{parent} is setter but {child} is getter"),o(t.set,e.set,i))}function s(t,e,i){var r=n(t),o=n(e);switch(r!==o&&i.error('descriptor types do not match. {parent} is "'+r+'", {child} is "'+o+'"'),o){case"data":a(t,e,i);break;case"accessor":l(t,e,i)}}function u(t,e){for(var i=0,r=v.length;i<r;i++){var n=v[i],o=n(e);if(o in t)return o}return null}function c(t,e,i){i.key=e;var r=Object.getPrototypeOf(t),n=Object.getOwnPropertyDescriptor(r,e),o=new g(r,t,n,i);if(void 0===n){var a=u(r,e),l=a?'\n\n  Did you mean "'+a+'"?':"";o.error("No descriptor matching {child} was found on the prototype chain."+l)}return s(n,i,o),i}function h(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,d.decorate)(c,e)}Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();e.default=h;var d=i(1),p="{child} does not properly override {parent}",y=/^function ([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?(\([^\)]*\))[\s\S]+$/,g=function(){function t(e,i,n,o){r(this,t),this.parentKlass=e,this.childKlass=i,this.parentDescriptor=n,this.childDescriptor=o}return f(t,[{key:"_getTopic",value:function(t){return void 0===t?null:"value"in t?t.value:"get"in t?t.get:"set"in t?t.set:void 0}},{key:"_extractTopicSignature",value:function(t){switch(typeof t){case"function":return this._extractFunctionSignature(t);default:return this.key}}},{key:"_extractFunctionSignature",value:function(t){var e=this;return t.toString().replace(y,function(t,i,r){return void 0===i&&(i=e.key),i+r})}},{key:"key",get:function(){return this.childDescriptor.key}},{key:"parentNotation",get:function(){return this.parentKlass.constructor.name+"#"+this.parentPropertySignature}},{key:"childNotation",get:function(){return this.childKlass.constructor.name+"#"+this.childPropertySignature}},{key:"parentTopic",get:function(){return this._getTopic(this.parentDescriptor)}},{key:"childTopic",get:function(){return this._getTopic(this.childDescriptor)}},{key:"parentPropertySignature",get:function(){return this._extractTopicSignature(this.parentTopic)}},{key:"childPropertySignature",get:function(){return this._extractTopicSignature(this.childTopic)}}]),f(t,[{key:"assert",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];t!==!0&&this.error(p+e)}},{key:"error",value:function(t){var e=this;throw t=t.replace("{parent}",function(t){return e.parentNotation}).replace("{child}",function(t){return e.childNotation}),new SyntaxError(t)}}]),t}(),v=[function(t){return t.toLowerCase()},function(t){return t.toUpperCase()},function(t){return t+"s"},function(t){return t.slice(0,-1)},function(t){return t.slice(1,t.length)}];t.exports=e.default},function(t,e,i){"use strict";function r(t,e,i){return i.writable=!1,i}function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,o.decorate)(r,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var o=i(1);t.exports=e.default},function(t,e,i){"use strict";function r(){}function n(t,e,i){if("object"==typeof console){var n=console.warn;console.warn=r;var o=e.apply(t,i);return console.warn=n,o}return e.apply(t,i)}function o(t,e,i){return l({},i,{value:function(){return n(this,i.value,arguments)}})}function a(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,s.decorate)(o,e)}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};e.default=a;var s=i(1);t.exports=e.default},function(t,e,i){"use strict";function r(t,e,i,r){var n=o(r,2),u=n[0],c=void 0===u?s:u,h=n[1],f=void 0===h?{}:h,d=i.value;if("function"!=typeof d)throw new SyntaxError("Only functions can be throttled");return f.leading!==!1&&(f.leading=!0),f.trailing!==!1&&(f.trailing=!0),a({},i,{value:function(){var t=this,i=(0,l.metaFor)(this),r=i.throttleTimeoutIds,n=i.throttlePreviousTimestamps,o=r[e],a=n[e]||0,s=Date.now();f.trailing&&(i.throttleTrailingArgs=arguments),a||f.leading!==!1||(a=s);var u=c-(s-a);u<=0?(clearTimeout(o),delete r[e],n[e]=s,d.apply(this,arguments)):!o&&f.trailing&&(r[e]=setTimeout(function(){n[e]=f.leading===!1?0:Date.now(),delete r[e],d.apply(t,i.throttleTrailingArgs),i.throttleTrailingArgs=null},u))}})}function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,l.decorate)(r,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],r=!0,n=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};e.default=n;var l=i(1),s=300;t.exports=e.default},function(t,e,i){"use strict";function r(t,e,i,r){var n=o(r,2),l=n[0],s=void 0===l?null:l,h=n[1],f=void 0===h?u:h,d=i.value;if(null===s&&(s=t.constructor.name+"."+e),"function"!=typeof d)throw new SyntaxError("@time can only be used on functions, not: "+d);return a({},i,{value:function(){var t=s+"-"+c;c++,f.time(t);try{return d.apply(this,arguments)}finally{f.timeEnd(t)}}})}function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,l.decorate)(r,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],r=!0,n=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};e.default=n;var l=i(1),s={},u={time:console.time?console.time.bind(console):function(t){s[t]=new Date},timeEnd:console.timeEnd?console.timeEnd.bind(console):function(t){var e=new Date,i=e-s[t];delete s[t],console.log(t+": "+i+"ms")}};e.defaultConsole=u;var c=0},function(t,e){"use strict";function i(t,e,o,a,l){for(o=o||0,a=a||t.length-1,l=l||n;a>o;){if(a-o>600){var s=a-o+1,u=e-o+1,c=Math.log(s),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(s-h)/s)*(u-s/2<0?-1:1),d=Math.max(o,Math.floor(e-u*h/s+f)),p=Math.min(a,Math.floor(e+(s-u)*h/s+f));i(t,e,d,p,l)}var y=t[e],g=o,v=a;for(r(t,o,e),l(t[a],y)>0&&r(t,o,a);g<v;){for(r(t,g,v),g++,v--;l(t[g],y)<0;)g++;for(;l(t[v],y)>0;)v--}0===l(t[o],y)?r(t,o,v):(v++,r(t,v,a)),v<=e&&(o=v+1),e<=v&&(a=v-1)}}function r(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function n(t,e){return t<e?-1:t>e?1:0}t.exports=i},function(t,e,i){"use strict";function r(t,e){return this instanceof r?(this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),void this.clear()):new r(t,e)}function n(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,r,n){n||(n=g(null)),n.minX=1/0,n.minY=1/0,n.maxX=-(1/0),n.maxY=-(1/0);for(var o,a=e;a<i;a++)o=t.children[a],l(n,t.leaf?r(o):o);return n}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function s(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function d(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}}function v(t,e,i,r,n){for(var o,a=[e,i];a.length;)i=a.pop(),e=a.pop(),i-e<=r||(o=e+Math.ceil((i-e)/r/2)*r,x(t,o,e,i,n),a.push(e,o,o,i))}t.exports=r,t.exports.default=r;var x=i(37);r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!y(t,e))return i;for(var n,o,a,l,s=[];e;){for(n=0,o=e.children.length;n<o;n++)a=e.children[n],l=e.leaf?r(a):a,y(t,l)&&(e.leaf?i.push(a):p(t,l)?this._all(a,i):s.push(a));e=s.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!y(t,e))return!1;for(var r,n,o,a,l=[];e;){for(r=0,n=e.children.length;r<n;r++)if(o=e.children[r],a=e.leaf?i(o):o,y(t,a)){if(e.leaf||p(t,a))return!0;l.push(o)}e=l.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var i,r,o,a,l=this.data,s=this.toBBox(t),u=[],c=[];l||u.length;){if(l||(l=u.pop(),r=u[u.length-1],i=c.pop(),a=!0),l.leaf&&(o=n(t,l.children,e),o!==-1))return l.children.splice(o,1),u.push(l),this._condense(u),this;a||l.leaf||!p(l,s)?r?(i++,l=r.children[i],a=!1):l=null:(u.push(l),c.push(i),i=0,r=l,l=l.children[0])}return this},toBBox:function(t){return t},compareMinX:s,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,a=i-e+1,l=this._maxEntries;if(a<=l)return n=g(t.slice(e,i+1)),o(n,this.toBBox),n;r||(r=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,r-1))),n=g([]),n.leaf=!1,n.height=r;var s,u,c,h,f=Math.ceil(a/l),d=f*Math.ceil(Math.sqrt(l));for(v(t,e,i,d,this.compareMinX),s=e;s<=i;s+=d)for(c=Math.min(s+d-1,i),v(t,s,c,f,this.compareMinY),u=s;u<=c;u+=f)h=Math.min(u+f-1,c),n.children.push(this._build(t,u,h,r-1));return o(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,o,a,l,s,u,h,d;;){if(r.push(e),e.leaf||r.length-1===i)break;for(h=d=1/0,n=0,o=e.children.length;n<o;n++)a=e.children[n],s=c(a),u=f(t,a)-s,u<d?(d=u,h=s<h?s:h,l=a):u===d&&s<h&&(h=s,l=a);e=l||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),o=[],a=this._chooseSubtree(n,this.data,e,o);for(a.children.push(t),l(a,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var a=this._chooseSplitIndex(i,n,r),l=g(i.children.splice(a,i.children.length-a));l.height=i.height,l.leaf=i.leaf,o(i,this.toBBox),o(l,this.toBBox),e?t[e-1].children.push(l):this._splitRoot(i,l)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,o,l,s,u,h,f;for(u=h=1/0,r=e;r<=i-e;r++)n=a(t,0,r,this.toBBox),o=a(t,r,i,this.toBBox),l=d(n,o),s=c(n)+c(o),l<u?(u=l,f=r,h=s<h?s:h):l===u&&s<h&&(h=s,f=r);return f},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:s,n=t.leaf?this.compareMinY:u,o=this._allDistMargin(t,e,i,r),a=this._allDistMargin(t,e,i,n);o<a&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,o,s=this.toBBox,u=a(t,0,e,s),c=a(t,i-e,i,s),f=h(u)+h(c);for(n=e;n<i-e;n++)o=t.children[n],l(u,t.leaf?s(o):o),f+=h(u);for(n=i-e-1;n>=e;n--)o=t.children[n],l(c,t.leaf?s(o):o),f+=h(c);return f},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)l(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children,e.splice(e.indexOf(t[i]),1)):this.clear():o(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}}])});